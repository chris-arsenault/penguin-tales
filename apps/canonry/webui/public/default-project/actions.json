[
  {
    "id": "seize_control",
    "name": "Seize Control",
    "description": "Take control of a location adjacent to territory already controlled",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction",
        "filters": [
          {
            "type": "graph_path",
            "assert": {
              "check": "count_max",
              "path": [
                {
                  "via": "controls",
                  "direction": "any",
                  "targetKind": "location",
                  "targetSubtype": "any"
                }
              ],
              "count": 2
            }
          }
        ]
      },
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "leader_of",
          "direction": "dst"
        },
        "kinds": [
          "npc"
        ],
        "required": true
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "controls",
          "with": "$actor"
        }
      ],
      "pickStrategy": "random"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "controls",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "adjust_relationship_strength",
          "kind": "leader_of",
          "src": "$instigator",
          "dst": "$actor",
          "delta": 0.1
        },
        {
          "type": "modify_pressure",
          "pressureId": "security",
          "delta": -2
        }
      ],
      "descriptionTemplate": "{actor.name} seized control of {target.name}",
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "resource_availibility",
          "multiplier": -1
        },
        {
          "pressure": "security",
          "multiplier": -1
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "form_alliance",
    "name": "Form Alliance",
    "description": "Create alliance between factions that are not already allied or at war",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      },
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "leader_of",
          "direction": "dst"
        },
        "kinds": [
          "npc"
        ],
        "required": true
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "allied_with",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.7,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": 2
        }
      ],
      "descriptionTemplate": "forged alliance with {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 0.8
    },
    "enabled": true
  },
  {
    "id": "declare_war",
    "name": "Declare War",
    "description": "Create enemy relationship between factions",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction",
        "filters": [
          {
            "type": "graph_path",
            "assert": {
              "check": "exists",
              "path": [
                {
                  "via": "leader_of",
                  "direction": "in",
                  "targetKind": "npc"
                }
              ]
            }
          }
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "lacks_relationship",
          "kind": "at_war_with",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "at_war_with",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.9,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "conflict",
          "delta": 10
        }
      ],
      "descriptionTemplate": "declared war on {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.6,
      "baseWeight": 0.5,
      "pressureModifiers": [
        {
          "pressure": "conflict",
          "multiplier": 1
        },
        {
          "pressure": "stability",
          "multiplier": -1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "raid",
    "name": "Raid",
    "description": "Attack an enemy faction",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "at_war_with",
          "with": "$actor",
          "direction": "both"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "enemy_of",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "conflict",
          "delta": 5
        }
      ],
      "descriptionTemplate": "raided {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.35,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "conflict",
          "multiplier": 1
        },
        {
          "pressure": "external_threat",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "establish_trade",
    "name": "Establish Trade Route",
    "description": "Create trade connection between two thriving locations",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kinds": [
          "npc",
          "faction"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "statuses": [
        "thriving"
      ],
      "maxResults": 2,
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "trades_with"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "trades_with",
          "src": "$target",
          "dst": "$target2",
          "strength": 0.6,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "resource_scarcity",
          "delta": -5
        }
      ],
      "descriptionTemplate": "established trade route between {target.name} and {target2.name}"
    },
    "probability": {
      "baseSuccessChance": 0.5,
      "baseWeight": 1.2,
      "pressureModifiers": [
        {
          "pressure": "resource_scarcity",
          "multiplier": -1
        },
        {
          "pressure": "stability",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "corrupt_location",
    "name": "Corrupt Location",
    "description": "Spread magical corruption to a location",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "magic"
        ]
      },
      "conditions": [
        {
          "type": "pressure",
          "pressureId": "magical_instability",
          "min": 50
        }
      ],
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "practitioner_of",
          "direction": "dst"
        },
        "kinds": [
          "npc",
          "faction"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "corrupted_by"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "corrupted_by",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.7
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_instability",
          "delta": 5
        }
      ],
      "descriptionTemplate": "corrupted {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.25,
      "baseWeight": 0.8,
      "pressureModifiers": [
        {
          "pressure": "magical_instability",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "manifest_magic",
    "name": "Manifest Magic",
    "description": "Magic manifests at a location",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "magic"
        ]
      },
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "practitioner_of",
          "direction": "dst"
        },
        "kinds": [
          "npc",
          "faction"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "manifests_at",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_stability",
          "delta": -2
        }
      ],
      "descriptionTemplate": "manifested at {target.name}",
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 1
    },
    "enabled": true
  },
  {
    "id": "spread_innovation",
    "name": "Spread Innovation",
    "description": "Technology spreads to new practitioners",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "technology"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "npc",
      "statuses": [
        "alive"
      ],
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "practitioner_of",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "practitioner_of",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.6
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_instability",
          "delta": -2
        }
      ],
      "descriptionTemplate": "spread to {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "resource_scarcity",
          "multiplier": 1
        },
        {
          "pressure": "magical_instability",
          "multiplier": -1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "convert_faction",
    "name": "Convert Faction",
    "description": "Spread cultural/religious belief to faction",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "rules",
        "filters": [
          {
            "type": "graph_path",
            "assert": {
              "check": "exists",
              "path": [
                {
                  "via": "weaponized_by",
                  "direction": "in",
                  "targetKind": "npc"
                }
              ]
            }
          }
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "related_to",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "related_to",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.7
        },
        {
          "type": "modify_pressure",
          "pressureId": "cultural_tension",
          "delta": -5
        },
        {
          "type": "modify_pressure",
          "pressureId": "stability",
          "delta": 3
        }
      ],
      "descriptionTemplate": "converted {target.name} to {actor.name}"
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "cultural_tension",
          "multiplier": -1
        },
        {
          "pressure": "stability",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "draw_in_faction",
    "name": "Draw In Faction",
    "description": "Neutral faction becomes war participant",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "occurrence",
        "subtypes": [
          "war"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "participant_in",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "participant_in",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "conflict",
          "delta": 8
        }
      ],
      "descriptionTemplate": "drew {target.name} into the war"
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 1.5,
      "pressureModifiers": [
        {
          "pressure": "conflict",
          "multiplier": 1
        },
        {
          "pressure": "external_threat",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "escalate_war",
    "name": "Escalate War",
    "description": "War intensifies, strengthening participant relationships",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "occurrence",
        "subtypes": [
          "war"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "participant_in",
          "with": "$actor",
          "direction": "src"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "adjust_relationship_strength",
          "kind": "participant_in",
          "src": "$target",
          "dst": "$actor",
          "delta": 0.1
        },
        {
          "type": "modify_pressure",
          "pressureId": "conflict",
          "delta": 5
        }
      ],
      "descriptionTemplate": "escalated in intensity"
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "conflict",
          "multiplier": 1
        },
        {
          "pressure": "external_threat",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "spread_corruption",
    "name": "Spread Corruption",
    "description": "Disaster corrupts adjacent locations",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "location",
        "filters": [
          {
            "type": "graph_path",
            "assert": {
              "check": "exists",
              "path": [
                {
                  "via": "epicenter_of",
                  "direction": "in",
                  "targetKind": "occurrence",
                  "targetSubtype": "magical_disaster"
                }
              ]
            }
          }
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "adjacent_to",
          "with": "$actor",
          "direction": "both"
        },
        {
          "type": "lacks_relationship",
          "kind": "corrupted_by",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "corrupted_by",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_instability",
          "delta": 10
        }
      ],
      "descriptionTemplate": "spread corruption to {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.35,
      "baseWeight": 1.2,
      "pressureModifiers": [
        {
          "pressure": "magical_instability",
          "multiplier": 1
        }
      ]
    },
    "enabled": false
  },
  {
    "id": "kill_orca",
    "name": "Kill Orca",
    "description": "Heros kill Orcas",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "npc"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "npc",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "has_tag",
          "tag": "orca"
        }
      ]
    },
    "outcome": {
      "descriptionTemplate": "killed {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.5,
      "baseWeight": 1,
      "pressureModifiers": []
    },
    "enabled": false
  }
]
