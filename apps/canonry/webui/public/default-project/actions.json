[
  {
    "id": "seize_control",
    "name": "Seize Control",
    "description": "Take control of a location adjacent to territory already controlled",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction",
        "filters": [
          {
            "type": "graph_path",
            "assert": {
              "check": "count_max",
              "path": [
                {
                  "via": "controls",
                  "direction": "any",
                  "targetKind": "location",
                  "targetSubtype": "any"
                }
              ],
              "count": 2
            }
          }
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "controls",
          "with": "$actor"
        }
      ],
      "pickStrategy": "random"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "controls",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "security",
          "delta": -2
        }
      ],
      "descriptionTemplate": "{actor.name} seized control of {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 1,
      "pressureModifiers": [
        {
          "pressure": "resource_availibility",
          "multiplier": -1
        },
        {
          "pressure": "security",
          "multiplier": -1
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "form_alliance",
    "name": "Form Alliance",
    "description": "Create alliance between factions that are not already allied or at war",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "lacks_relationship",
          "kind": "allied_with",
          "with": "$actor"
        },
        {
          "type": "lacks_relationship",
          "kind": "at_war_with",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "allied_with",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.7,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": 2
        }
      ],
      "descriptionTemplate": "forged alliance with {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 0.8,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": -0.6
        },
        {
          "pressure": "security",
          "multiplier": -0.3
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "declare_war",
    "name": "Declare War",
    "description": "Create enemy relationship between factions",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "lacks_relationship",
          "kind": "at_war_with",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "at_war_with",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.9,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": -6
        }
      ],
      "descriptionTemplate": "declared war on {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.6,
      "baseWeight": 0.3,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": -0.4
        },
        {
          "pressure": "security",
          "multiplier": -0.3
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "sue_for_peace",
    "name": "Sue for Peace",
    "description": "End a war through negotiation",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      },
      "conditions": [
        {
          "type": "relationship_count",
          "relationshipKind": "at_war_with",
          "direction": "both",
          "min": 1
        }
      ]
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "has_relationship",
          "kind": "at_war_with",
          "with": "$actor",
          "direction": "both"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "archive_relationship",
          "entity": "$actor",
          "relationshipKind": "at_war_with",
          "with": "$target"
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": 6
        },
        {
          "type": "modify_pressure",
          "pressureId": "security",
          "delta": 3
        }
      ],
      "descriptionTemplate": "negotiated peace with {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.5,
      "baseWeight": 0.25,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": -0.3
        },
        {
          "pressure": "security",
          "multiplier": -0.2
        },
        {
          "pressure": "resource_availibility",
          "multiplier": -0.2
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "raid",
    "name": "Raid",
    "description": "Attack an enemy faction",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "at_war_with",
          "with": "$actor",
          "direction": "both"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "enemy_of",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": -3
        }
      ],
      "descriptionTemplate": "raided {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.35,
      "baseWeight": 0.5,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": 0.6
        },
        {
          "pressure": "security",
          "multiplier": 0.4
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "establish_trade",
    "name": "Establish Trade Route",
    "description": "Create trade connection between two thriving locations",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "statuses": [
        "thriving"
      ],
      "maxResults": 2,
      "filters": [
        {
          "type": "has_any_tag",
          "tags": [
            "trade",
            "resource"
          ]
        },
        {
          "type": "lacks_relationship",
          "kind": "trades_with"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "trades_with",
          "src": "$target",
          "dst": "$target2",
          "strength": 0.6,
          "bidirectional": true
        },
        {
          "type": "modify_pressure",
          "pressureId": "resource_availibility",
          "delta": 5
        }
      ],
      "descriptionTemplate": "established trade route between {target.name} and {target2.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.6,
      "baseWeight": 0.6,
      "pressureModifiers": [
        {
          "pressure": "resource_availibility",
          "multiplier": -0.6
        },
        {
          "pressure": "security",
          "multiplier": 0.2
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "corrupt_location",
    "name": "Corrupt Location",
    "description": "Spread magical corruption to a location",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "magic"
        ]
      },
      "conditions": [
        {
          "type": "pressure",
          "pressureId": "magical_stability",
          "max": 10
        }
      ],
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "practitioner_of",
          "direction": "dst"
        },
        "kinds": [
          "npc",
          "faction"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "corrupted_by"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "corrupted_by",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.7
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_stability",
          "delta": -5
        }
      ],
      "descriptionTemplate": "corrupted {target.name}"
    },
    "probability": {
      "baseSuccessChance": 0.25,
      "baseWeight": 0.6,
      "pressureModifiers": [
        {
          "pressure": "magical_stability",
          "multiplier": 0.6
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "manifest_magic",
    "name": "Manifest Magic",
    "description": "Magic manifests at a location",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "magic"
        ]
      },
      "instigator": {
        "from": {
          "relatedTo": "$actor",
          "relationship": "practitioner_of",
          "direction": "dst"
        },
        "kinds": [
          "npc",
          "faction"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "manifests_at",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_stability",
          "delta": -2
        }
      ],
      "descriptionTemplate": "manifested at {target.name}",
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 0.6,
      "pressureModifiers": [
        {
          "pressure": "magical_stability",
          "multiplier": 0.6
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "spread_innovation",
    "name": "Spread Innovation",
    "description": "Technology spreads to new practitioners",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "technology"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "has_any_tag",
          "tags": [
            "organized",
            "trade",
            "resource"
          ]
        },
        {
          "type": "lacks_relationship",
          "kind": "practitioner_of",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "practitioner_of",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.6
        },
        {
          "type": "modify_pressure",
          "pressureId": "resource_availibility",
          "delta": 3
        }
      ],
      "descriptionTemplate": "spread to {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 0.6,
      "pressureModifiers": [
        {
          "pressure": "resource_availibility",
          "multiplier": -0.6
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "convert_faction",
    "name": "Convert Faction",
    "description": "Spread cultural/religious belief to faction",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "faction",
        "filters": [
          {
            "type": "has_any_tag",
            "tags": [
              "organized",
              "trade",
              "mystical",
              "political"
            ]
          }
        ]
      },
      "instigator": {
        "from": "graph",
        "kind": "rules",
        "subtypes": [
          "ideology",
          "law"
        ],
        "filters": [
          {
            "type": "matches_culture",
            "with": "$actor"
          }
        ],
        "pickStrategy": "random",
        "required": true
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "believer_of",
          "with": "$instigator"
        },
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "believer_of",
          "src": "$target",
          "dst": "$instigator",
          "strength": 0.7
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": 3
        },
        {
          "type": "modify_pressure",
          "pressureId": "security",
          "delta": 2
        }
      ],
      "descriptionTemplate": "converted {target.name} to {instigator.name}",
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 0.6,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": 0.6
        },
        {
          "pressure": "security",
          "multiplier": 0.4
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "draw_in_faction",
    "name": "Draw In Faction",
    "description": "Neutral faction becomes war participant",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "occurrence",
        "subtypes": [
          "war"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "participant_in",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "participant_in",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": -5
        }
      ],
      "descriptionTemplate": "drew {target.name} into the war",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.3,
      "baseWeight": 0.9,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": 0.6
        },
        {
          "pressure": "security",
          "multiplier": 0.4
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "escalate_war",
    "name": "Escalate War",
    "description": "War intensifies, strengthening participant relationships",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "occurrence",
        "subtypes": [
          "war"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "faction",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "participant_in",
          "with": "$actor",
          "direction": "src"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "adjust_relationship_strength",
          "kind": "participant_in",
          "src": "$target",
          "dst": "$actor",
          "delta": 0.1
        },
        {
          "type": "modify_pressure",
          "pressureId": "harmony",
          "delta": -3
        }
      ],
      "descriptionTemplate": "escalated in intensity",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.4,
      "baseWeight": 0.7,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": 0.6
        },
        {
          "pressure": "security",
          "multiplier": 0.4
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "spread_corruption",
    "name": "Spread Corruption",
    "description": "Disaster corrupts adjacent locations",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "location",
        "filters": [
          {
            "type": "has_any_tag",
            "tags": [
              "mystical",
              "anomaly",
              "dangerous"
            ]
          }
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "location",
      "filters": [
        {
          "type": "has_relationship",
          "kind": "adjacent_to",
          "with": "$actor",
          "direction": "both"
        },
        {
          "type": "lacks_relationship",
          "kind": "corrupted_by",
          "with": "$actor"
        }
      ]
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "corrupted_by",
          "src": "$target",
          "dst": "$actor",
          "strength": 0.8
        },
        {
          "type": "modify_pressure",
          "pressureId": "magical_stability",
          "delta": -8
        }
      ],
      "descriptionTemplate": "spread corruption to {target.name}",
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.35,
      "baseWeight": 0.5,
      "pressureModifiers": [
        {
          "pressure": "magical_stability",
          "multiplier": 0.6
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "kill_orca",
    "name": "Kill Orca",
    "description": "Heros kill Orcas",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "npc",
        "subtypes": [
          "hero"
        ],
        "statusFilter": "alive"
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "npc",
      "filters": [
        {
          "type": "exclude",
          "entities": [
            "$actor"
          ]
        },
        {
          "type": "has_tag",
          "tag": "orca"
        }
      ],
      "subtypes": [
        "orca"
      ],
      "statusFilter": "alive"
    },
    "outcome": {
      "descriptionTemplate": "killed {target.name}",
      "mutations": [
        {
          "type": "change_status",
          "entity": "$target",
          "newStatus": "dead"
        },
        {
          "type": "modify_pressure",
          "pressureId": "security",
          "delta": 1
        }
      ],
      "applyProminenceToActor": true,
      "applyProminenceToInstigator": true
    },
    "probability": {
      "baseSuccessChance": 0.5,
      "baseWeight": 0.6,
      "pressureModifiers": []
    },
    "enabled": true
  },
  {
    "id": "master_ability",
    "name": "Master Ability",
    "description": "An NPC studies and masters a notable ability",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "npc",
        "statusFilter": "alive",
        "subtypes": [
          "hero",
          "mayor",
          "merchant",
          "outlaw"
        ]
      }
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "abilities",
      "statuses": [
        "active",
        "discovered",
        "emergent"
      ],
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "practitioner_of",
          "with": "$actor"
        }
      ],
      "pickStrategy": "random"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "practitioner_of",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.7
        }
      ],
      "descriptionTemplate": "mastered the art of {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.5,
      "baseWeight": 0.35,
      "pressureModifiers": [
        {
          "pressure": "magical_stability",
          "multiplier": 0.4
        },
        {
          "pressure": "security",
          "multiplier": 0.2
        }
      ]
    },
    "enabled": true
  },
  {
    "id": "echo_occurrence",
    "name": "Echo Occurrence",
    "description": "An ability resonates with a major event and becomes legend",
    "actor": {
      "selection": {
        "strategy": "by_kind",
        "kind": "abilities",
        "subtypes": [
          "magic",
          "combat",
          "technology"
        ],
        "statuses": [
          "active",
          "discovered",
          "emergent"
        ]
      },
      "conditions": [
        {
          "type": "relationship_count",
          "relationshipKind": "practitioner_of",
          "direction": "dst",
          "min": 1
        },
        {
          "type": "prominence",
          "max": "renowned"
        }
      ]
    },
    "targeting": {
      "strategy": "by_kind",
      "kind": "occurrence",
      "statusFilter": "active",
      "subtypes": [
        "war",
        "disaster",
        "celebration",
        "succession_crisis"
      ],
      "filters": [
        {
          "type": "lacks_relationship",
          "kind": "derived_from",
          "with": "$actor"
        }
      ],
      "pickStrategy": "random"
    },
    "outcome": {
      "mutations": [
        {
          "type": "create_relationship",
          "kind": "derived_from",
          "src": "$actor",
          "dst": "$target",
          "strength": 0.8
        },
        {
          "type": "adjust_prominence",
          "direction": "up",
          "entity": "$actor"
        }
      ],
      "descriptionTemplate": "echoed through the event of {target.name}",
      "applyProminenceToActor": true
    },
    "probability": {
      "baseSuccessChance": 0.35,
      "baseWeight": 0.25,
      "pressureModifiers": [
        {
          "pressure": "harmony",
          "multiplier": -0.2
        },
        {
          "pressure": "magical_stability",
          "multiplier": 0.3
        }
      ]
    },
    "enabled": true
  }
]
