{"id":"penguin-tales-1zo","content_hash":"6903712504c18f2b8f8239f764fff9512cb918974c62a9dab4c82d397e87a2d5","title":"Exclusion-Aware wrapper","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T20:43:58.981354823-07:00","updated_at":"2025-11-26T20:50:07.315509651-07:00","closed_at":"2025-11-26T20:50:07.315509651-07:00","source_repo":"."}
{"id":"penguin-tales-2la","content_hash":"812ce5b18119ca2dba5cc7b016a4c5a336fa04438da0ff128ea8fc8283b240ca","title":"Phase 2: Implement validation metrics system","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-24T08:26:59.87806488-07:00","updated_at":"2025-11-24T08:35:09.273006645-07:00","closed_at":"2025-11-24T08:35:09.273006645-07:00","source_repo":"."}
{"id":"penguin-tales-2mz","content_hash":"b324738de690792c3455f57145597d0c09d939fa619b7010ccea784bddf98130","title":"Implement mock KG (HardState and Relationship types)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.753282658-07:00","updated_at":"2025-11-28T03:56:35.103288872-07:00","closed_at":"2025-11-28T03:56:35.103288872-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-2mz","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.753910087-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-3ap","content_hash":"39a6d38577ef57583d615ffe37787896550b206968641038ce92c80864b15412","title":"Gaussian Cluster placement","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T20:43:59.822537282-07:00","updated_at":"2025-11-26T20:51:28.632954856-07:00","closed_at":"2025-11-26T20:51:28.632954856-07:00","source_repo":"."}
{"id":"penguin-tales-3qa","content_hash":"8e070e2677a313492fe245593b9089ce25e4befde81c3e034a456f84ae79ed6d","title":"Cosmographer - Visual World Seed Builder","description":"Visual world-building tool for creating initial world seeds. Outputs JSON configuration consumed by lore-weave for procedural world generation. See apps/cosmographer/PLAN.md for full design.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-28T23:19:50.922271144-07:00","updated_at":"2025-11-28T23:38:26.418201655-07:00","closed_at":"2025-11-28T23:38:26.418201655-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.1","content_hash":"961d3acd957c5c6ea29e62b0e85a7447c19f0b3bbcf75d4d2dbb15eb1b632ad3","title":"Project infrastructure and IndexedDB storage","description":"Set up apps/cosmographer directory structure, Vite + React build, IndexedDB storage (reuse pattern from name-forge), ProjectManager component, basic App shell with navigation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.256936662-07:00","updated_at":"2025-11-28T23:24:15.771072152-07:00","closed_at":"2025-11-28T23:24:15.771077093-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.2","content_hash":"fc0f557fcbd9d6e2a40be6b4e51f814478dc68ba4312793327e39f16a85c1539","title":"Schema Editor - Entity kinds, subtypes, statuses","description":"EntityKindEditor with subtype/status management, RelationshipKindEditor with constraints, Zod validation schemas, schema preview/summary view.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.26697362-07:00","updated_at":"2025-11-28T23:28:02.3474133-07:00","closed_at":"2025-11-28T23:28:02.347416685-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.3","content_hash":"fbba54b06183517e143f75af15ca941cb8d3d4ae1dc96922ac58dacc3a619cbb","title":"Culture Editor with axis biases","description":"CultureList with CRUD operations, CultureForm with color picker, AxisBiasSliders component, home region assignment UI per entity kind.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.277306143-07:00","updated_at":"2025-11-28T23:29:36.713344807-07:00","closed_at":"2025-11-28T23:29:36.713348471-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.4","content_hash":"bfedc0c53340df5d8e5913d5480ce3edefc3368c80e8df2f046f23c256f02af8","title":"Semantic Plane Canvas visualization","description":"PlaneCanvas with pan/zoom, axis labels and grid, region rendering (circles, rectangles), entity rendering with culture colors. Core visual component.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.287030976-07:00","updated_at":"2025-11-28T23:32:10.733535392-07:00","closed_at":"2025-11-28T23:32:10.733539508-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.5","content_hash":"808bcb0dc959b1f81e8654ebeadb989b878df7f41b51158da0c78a88f18d16dd","title":"Region drawing and editing tools","description":"Region drawing tools (circle, rectangle), region selection and editing, region property inspector, Z-range editor for 3D regions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.296560508-07:00","updated_at":"2025-11-28T23:32:25.760852717-07:00","closed_at":"2025-11-28T23:32:25.76085639-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.6","content_hash":"6de1ff45b411d7907e7e3336284ed5eac9a2a93436dd87018f4784093a4a6af7","title":"Entity placement on semantic planes","description":"Entity palette/list, drag-and-drop placement on canvas, entity inspector panel, snap-to-region option.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.306290702-07:00","updated_at":"2025-11-28T23:33:58.699088663-07:00","closed_at":"2025-11-28T23:33:58.699092827-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.7","content_hash":"b15fcba9e8b17f140f03168008d05591e893b42ceccbfba6744b24bc03c0b8b2","title":"Relationship editor and matrix view","description":"Visual relationship drawing mode on canvas, relationship matrix table view, relationship validation against schema constraints.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.315617905-07:00","updated_at":"2025-11-28T23:38:13.588526581-07:00","closed_at":"2025-11-28T23:38:13.588526581-07:00","source_repo":"."}
{"id":"penguin-tales-3qa.8","content_hash":"11ecd97ab6f9b0368757f2517ae889a3d02740f27886ea08c30c72cebaa0e533","title":"JSON export with validation","description":"JSON export formatting, validation warnings, export preview, download functionality, default project template.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T23:20:09.32540957-07:00","updated_at":"2025-11-28T23:38:16.932835581-07:00","closed_at":"2025-11-28T23:38:16.932835581-07:00","source_repo":"."}
{"id":"penguin-tales-3qn","content_hash":"b3425acf198503645ba69eb77122befc56ed4ce5154e25d4e577cfd53367101a","title":"Research library replacements for reimplemented algorithms","description":"## Library Replacement Research\n\n### HIGH PRIORITY REPLACEMENTS\n\n**1. turf.js** - Would replace ~10 geometry functions:\n- Point-in-polygon (ray casting) in regionMapper.ts\n- Euclidean distance calculations\n- Polygon area (shoelace formula)\n- Polygon centroid\n- Bounding box calculations\n\n**2. simple-statistics** - Statistical functions:\n- Shannon entropy (distributionCalculations.ts)\n- Variance/StdDev (statisticsCollector.ts)\n- Mean absolute deviation\n\n**3. graphlib** - Graph algorithms:\n- DFS for connected components (statisticsCollector.ts)\n- Graph traversal utilities\n\n**4. poisson-disk-sampling** - Spatial distribution:\n- regionPlacement.ts rejection sampling\n\n### BUGS FOUND\n⚠️ **Fisher-Yates shuffle in helpers.ts uses `sort(() =\u003e Math.random() - 0.5)`** - This is NOT a proper shuffle and produces biased results. Replace with lodash.shuffle or fast-shuffle.\n\n### NOT WORTH REPLACING (Domain-Specific)\n- Weighted scoring/hub penalties in targetSelector.ts\n- Homeostatic control in dynamicWeightCalculator.ts\n- Greedy clustering in clusteringUtils.ts (tuned for world gen)\n\n### SUMMARY\n| Library | Functions Replaced | Files Affected |\n|---------|-------------------|----------------|\n| turf.js | 10+ | regionMapper.ts, regionPlacement.ts |\n| simple-statistics | 5 | distributionCalculations.ts, statisticsCollector.ts |\n| graphlib | 2 | statisticsCollector.ts, graphQueries.ts |\n| poisson-disk-sampling | 1 | regionPlacement.ts |\n| lodash/fast-shuffle | 1 | helpers.ts (BUG FIX)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T03:55:41.458497754-07:00","updated_at":"2025-11-28T04:03:13.871724002-07:00","closed_at":"2025-11-28T04:03:13.871724002-07:00","source_repo":"."}
{"id":"penguin-tales-3qp","content_hash":"5af827ec4b7452faf910c73a9ed2133813e9a5bedf8d9c29b5136cca9176eb15","title":"UI: Remove penguin domain knowledge","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T11:35:01.192864454-07:00","updated_at":"2025-11-27T11:49:54.803334796-07:00","closed_at":"2025-11-27T11:49:54.803334796-07:00","source_repo":"."}
{"id":"penguin-tales-3se","content_hash":"35d61d51c832f84e4739b2f21c7d7e1282995ebbe9df622fbb40f0d75af7e595","title":"addEntityWithPlacement API","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T20:44:02.25592643-07:00","updated_at":"2025-11-26T20:50:07.322841045-07:00","closed_at":"2025-11-26T20:50:07.322841045-07:00","source_repo":"."}
{"id":"penguin-tales-3tx","content_hash":"e8696f0003a9af333cb190446d72998d8c9ce0056d85052b49ce4186b654d468","title":"Move loreIndex.ts and loreValidator.ts to domain","description":"These files contain penguin-specific hardcoded data and should be in penguin-tales/lore/ not in framework","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T05:13:16.336766817-07:00","updated_at":"2025-11-28T05:15:13.31039671-07:00","closed_at":"2025-11-28T05:15:13.31039671-07:00","source_repo":"."}
{"id":"penguin-tales-3vs","content_hash":"ec6cad7f988929e4ac5b196180b2132cc3e30a5678e7c62e589782d431e5abf2","title":"Move feedbackLoops config to domain","description":"feedbackLoops in lib/config/ contains domain-specific data. Should be passed via EngineConfig from domain.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T05:19:53.587956838-07:00","updated_at":"2025-11-28T05:25:52.430635599-07:00","closed_at":"2025-11-28T05:25:52.430635599-07:00","source_repo":"."}
{"id":"penguin-tales-40w","content_hash":"065e1637364c0ec0572e14ebcc977359d64da82b636f0394735cc428c6268ed1","title":"Implement style transforms (apostrophes, hyphens, capitalization)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.383138866-07:00","updated_at":"2025-11-24T08:01:42.444647051-07:00","closed_at":"2025-11-24T08:01:42.444647051-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-40w","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.38398474-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-4c4","content_hash":"ab0e074566696b499860739c3b7175cfa3a82de186191f6fd704ac91196bcfdb","title":"Remove hardcoded entity kind logic from framework","description":"The framework has hardcoded knowledge of entity kinds (npc, location, faction, etc.) in:\n- worldEngine.ts: createEntitySnapshot(), detectChanges()\n- changeDetection.ts: entity-kind-specific snapshot logic\n\n**Solution:**\n1. Extend EntityKindDefinition with snapshotConfig\n2. Domain defines how each entity kind should be tracked\n3. Framework uses domain schema to determine change detection rules\n\n**Tasks:**\n- Add snapshotConfig to EntityKindDefinition interface\n- Create generic snapshot creation based on domain config\n- Update penguin schema with snapshot configs for each entity kind\n- Remove entity-kind-specific if/else chains from framework","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-26T09:44:40.523161736-07:00","updated_at":"2025-11-28T14:28:22.589599457-07:00","closed_at":"2025-11-28T14:28:22.589599457-07:00","source_repo":"."}
{"id":"penguin-tales-4c4.1","content_hash":"710f484a69356c01e86afda96ab45d5bf03f6555b16c29b7b889cbfe2f60aa27","title":"Add snapshotConfig to EntityKindDefinition","description":"Extend EntityKindDefinition in domainSchema.ts:\n\nsnapshotConfig?: {\n  countRelationships?: Array\u003c{\n    field: string;\n    relationshipKind: string;\n    direction: 'src' | 'dst';\n  }\u003e;\n  trackRelationships?: Array\u003c{\n    field: string;\n    relationshipKinds: string[];\n    direction: 'src' | 'dst';\n    single?: boolean;\n  }\u003e;\n  trackLinks?: Array\u003c{\n    field: string;\n    linkKind: string;\n  }\u003e;\n}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:19.071079758-07:00","updated_at":"2025-11-26T09:58:29.472471892-07:00","closed_at":"2025-11-26T09:58:29.472475619-07:00","source_repo":"."}
{"id":"penguin-tales-4c4.2","content_hash":"3c80a6ebcbfea0183adcc13b4e8292cfe38d2bf728ef4bbcf73f9ce052a77a03","title":"Update penguin schema with snapshot configs","description":"In penguin-tales/lore/schema.ts, add snapshotConfig to each entity kind:\n\n- npc: track leader_of links\n- location: count resident_of, track controls/stronghold_of  \n- faction: track leader_of, stronghold_of, allied_with, at_war_with\n- rules: track weaponized_by, kept_secret_by\n- abilities: count practitioner_of, track manifests_at","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:19.18671283-07:00","updated_at":"2025-11-26T09:59:17.839331107-07:00","closed_at":"2025-11-26T09:59:17.839335185-07:00","source_repo":"."}
{"id":"penguin-tales-4ye","content_hash":"d4949487dc2a74407c71aad62c44259028958f20b1202be61cafc120a666b4d7","title":"PlacementScheme type system","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T20:43:54.417127809-07:00","updated_at":"2025-11-26T20:45:48.035517671-07:00","closed_at":"2025-11-26T20:45:48.035517671-07:00","source_repo":"."}
{"id":"penguin-tales-54g","content_hash":"3a610ace34f4518f14c3a28358a937e66bc59c0bc4e81324c13a663ac2c5d23d","title":"Setup namegen-validation package structure","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:00.039785966-07:00","updated_at":"2025-11-24T08:28:43.814800205-07:00","closed_at":"2025-11-24T08:28:43.814800205-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-54g","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:00.040420771-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-5e5","content_hash":"acb3d9e0ef6fde1828e3f38a45c35151275a97e42e99187274f0728f47aa18f8","title":"Build CLI interface with commander","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.95996403-07:00","updated_at":"2025-11-24T08:03:54.105434425-07:00","closed_at":"2025-11-24T08:03:54.105434425-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-5e5","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.960659043-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-5u1","content_hash":"9452e2eae8f76bdefd3a85a314ead03e4771602733f2bdc56d3e262d6d3c43e8","title":"Phase 1: Implement core name generation framework","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-24T07:48:25.713081408-07:00","updated_at":"2025-11-24T08:09:44.911704429-07:00","closed_at":"2025-11-24T08:09:44.911704429-07:00","source_repo":"."}
{"id":"penguin-tales-5ue","content_hash":"386feffecdf7c1f409f7237a53e52629ab4df5b30e393ca484d8b40d43d81abc","title":"Complete Graph API encapsulation migration in actionDomains.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T13:01:33.950052505-07:00","updated_at":"2025-11-27T13:10:22.738854348-07:00","closed_at":"2025-11-27T13:10:22.738854348-07:00","source_repo":"."}
{"id":"penguin-tales-60a","content_hash":"81b85afcc54dd458f3fc87204dcc24a31f52c5a8121b7a4c797b04b559dcf812","title":"Implement diffuseness metrics (nearest-neighbor analysis)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:00.610513663-07:00","updated_at":"2025-11-24T08:30:46.069692915-07:00","closed_at":"2025-11-24T08:30:46.069692915-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-60a","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:00.611402782-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6fb","content_hash":"fcb11ee7c5a1bc8ebe71b14ccda099b1a5757df6ca46334ba84bdd20b34df68c","title":"Move entityRegistries.ts to domain layer","description":"entityRegistries.ts defines all entity kinds, subtypes, and template references. Should be domain-specific.","notes":"File doesn't exist - entityRegistries.ts not found in codebase. Either removed, renamed, or was never created. Task obsolete.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.763884478-07:00","updated_at":"2025-11-28T04:29:35.136488404-07:00","closed_at":"2025-11-28T04:29:35.13649366-07:00","source_repo":"."}
{"id":"penguin-tales-6gw","content_hash":"e7aef349415e2420c3f9baed67664bff262c7c838884938e82cf512401fe8b54","title":"Anchor and Centroid Co-location","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T20:43:56.158113572-07:00","updated_at":"2025-11-26T20:50:07.307916367-07:00","closed_at":"2025-11-26T20:50:07.307916367-07:00","source_repo":"."}
{"id":"penguin-tales-6y3","content_hash":"7cc62492abc8fd991da7110a541b89d1496e740eba49bfa806df73885e29ac57","title":"True Locations Recovery - Culture-First Coordinate System","description":"Fix the failed true-locations implementation: centralize coordinate services, wire KindRegionService, add region-mutating placement flow, and make culture a first-class input throughout. No fallbacks, no migration paths.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-28T15:59:24.567805778-07:00","updated_at":"2025-11-28T16:50:30.290771203-07:00","closed_at":"2025-11-28T16:50:30.290771203-07:00","source_repo":"."}
{"id":"penguin-tales-6y3.1","content_hash":"d3e084cf61e06c823999508be30b7a3b5d29179292e48a3f60b0c08c963a500d","title":"Create CoordinateContext with culture registry","description":"Create CoordinateContext class holding KindRegionService, SemanticEncoder, and culture context registry. Attach to Graph. Define PlacementContext interface with cultureId, seedRegionIds, preferredAxes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:50.516375772-07:00","updated_at":"2025-11-28T16:02:27.760214564-07:00","closed_at":"2025-11-28T16:02:27.760217227-07:00","source_repo":"."}
{"id":"penguin-tales-6y3.2","content_hash":"c2dc03569a5afb79e2e8ae65b6e1e52208adc84a322a8af31ccde26d30dc88c9","title":"Inject CoordinateContext into TemplateGraphView","description":"Modify TemplateGraphView to receive CoordinateContext via injection. Remove all internal RegionMapper/SemanticEncoder construction - context must be provided externally.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:51.571034275-07:00","updated_at":"2025-11-28T16:06:43.485172089-07:00","closed_at":"2025-11-28T16:06:43.485175833-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.2","depends_on_id":"penguin-tales-6y3.1","type":"blocks","created_at":"2025-11-28T16:00:12.126053046-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.3","content_hash":"ef79c1e8c59be5e34adb0256395f1f8469d3004be6a0534a75afff5c4acae3c5","title":"Wire KindRegionService into graph with culture support","description":"Initialize KindRegionService during graph construction (require configs, no defaults). Route all placements through processEntityPlacement. Emergent region creation accepts PlacementContext for culture-aware seeding.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:52.69873667-07:00","updated_at":"2025-11-28T16:07:41.408419474-07:00","closed_at":"2025-11-28T16:07:41.408423465-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.3","depends_on_id":"penguin-tales-6y3.1","type":"blocks","created_at":"2025-11-28T16:00:12.142758992-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.4","content_hash":"6934964cbaf5e2e663cd02a17e8a932b54e52c7204af9e41b534cabdaf6ef1ba","title":"Add coordinate/region persistence to entity records","description":"Extend entity records to store coordinates, region lookup results (primary/all IDs), and cultureId when placement was culture-driven. Add exportRegionState/importRegionState to worldEngine serialization.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:53.975556224-07:00","updated_at":"2025-11-28T16:08:46.297998746-07:00","closed_at":"2025-11-28T16:08:46.298001551-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.4","depends_on_id":"penguin-tales-6y3.3","type":"blocks","created_at":"2025-11-28T16:00:12.150872731-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.5","content_hash":"b6a9447d2a6a00af26e7c8c3171abe6d1dce1c599a45c65c5961ab3e360b8732","title":"Implement culture-aware placement flow","description":"Update placement flow: receive PlacementContext -\u003e sample point biased by culture regions -\u003e apply region mutation -\u003e re-derive tags including culture -\u003e attach to entity. SemanticEncoder must accept PlacementContext for culture-weighted axes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:55.621477116-07:00","updated_at":"2025-11-28T16:09:41.175881072-07:00","closed_at":"2025-11-28T16:09:41.175884835-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.5","depends_on_id":"penguin-tales-6y3.2","type":"blocks","created_at":"2025-11-28T16:00:12.159944644-07:00","created_by":"daemon"},{"issue_id":"penguin-tales-6y3.5","depends_on_id":"penguin-tales-6y3.3","type":"blocks","created_at":"2025-11-28T16:00:12.16785299-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.6","content_hash":"8b85e60ba7f80c299830a6ea3e066d5333cae89886ff82ab1802d9cb6e1f4516","title":"Create placement convenience APIs","description":"Add to TemplateGraphView: placeInRegion(regionId, entity, context), placeNearEntity(ref, entity, context), spawnEmergentRegionAndPlace(config, entity, context), placeWithCulture(cultureId, entity).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:56.619037974-07:00","updated_at":"2025-11-28T16:10:36.82510628-07:00","closed_at":"2025-11-28T16:10:36.825112709-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.6","depends_on_id":"penguin-tales-6y3.5","type":"blocks","created_at":"2025-11-28T16:00:12.175819197-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.7","content_hash":"e848a5bf9a4715a2e868c642c176c15e6b54867b0ae0302c291a4d298f8a9669","title":"Define penguin culture configs","description":"Create penguin-tales/lore/config/cultures.ts with culture definitions: semantic axis preferences, seed region coordinates, emergent region defaults. Update coordinates.ts with per-kind configs and axes with culture-driven buckets.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:58.448871848-07:00","updated_at":"2025-11-28T16:13:38.971455695-07:00","closed_at":"2025-11-28T16:13:38.971458922-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.7","depends_on_id":"penguin-tales-6y3.1","type":"blocks","created_at":"2025-11-28T16:00:12.183762491-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.8","content_hash":"4003c2b8d9cca07bbf4a07681c38106f79d736fbcb3cf7c6eeff4407998247df","title":"Update domain templates with culture context","description":"Update penguin templates to pass PlacementContext: NPCs from faction/colony lineage, locations from founding population, magic/law from regional influence. Wire Name Forge to consume culture tags.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T15:59:59.422670946-07:00","updated_at":"2025-11-28T16:42:34.094627671-07:00","closed_at":"2025-11-28T16:42:34.094627671-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.8","depends_on_id":"penguin-tales-6y3.6","type":"blocks","created_at":"2025-11-28T16:00:12.192231542-07:00","created_by":"daemon"},{"issue_id":"penguin-tales-6y3.8","depends_on_id":"penguin-tales-6y3.7","type":"blocks","created_at":"2025-11-28T16:00:12.20022791-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-6y3.9","content_hash":"ddf4774e5de412f4fb0a3c3848ac56fe60cb336405077917b1c510cdd784a4ef","title":"Add coordinate system tests","description":"Unit tests: kindRegionService (emergent+culture), semanticEncoder (culture-weighted), coordinateContext (injection, no defaults). Integration: multi-kind placement -\u003e export -\u003e import -\u003e assert regions survive. Error cases: missing config errors clearly.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T16:00:00.688062586-07:00","updated_at":"2025-11-28T16:49:52.72692699-07:00","closed_at":"2025-11-28T16:49:52.72692699-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-6y3.9","depends_on_id":"penguin-tales-6y3.8","type":"blocks","created_at":"2025-11-28T16:00:12.208623655-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-7si","content_hash":"2768192ce78c84a8e28f5f0fb1818b4a2b534d30717d255b97f7bd216523fee2","title":"Parameterize emergentDiscovery.ts via domain schema","description":"emergentDiscovery.ts has hardcoded subtypes (colony, anomaly) and status values (thriving, waning). Parameterize via domain schema.","notes":"Analysis: emergentDiscovery.ts partially parameterized. 'thrivingStatuses'/'strugglingStatuses' already come from config via requireConfigValue(). Remaining hardcoded: 'anomaly' subtype (lines 192, 309) for location entities. Fix: Add 'anomalySubtype' config field and read via requireConfigValue().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.783291414-07:00","updated_at":"2025-11-28T04:28:53.025461299-07:00","closed_at":"2025-11-28T04:28:53.025466185-07:00","source_repo":"."}
{"id":"penguin-tales-89w","content_hash":"6e33cf083898e794728bbfd3bc71f8472b8335b173bcd9600c017c08e068031d","title":"Implement string distance metrics (Levenshtein, shape-based)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:00.205136404-07:00","updated_at":"2025-11-24T08:29:26.825365339-07:00","closed_at":"2025-11-24T08:29:26.825365339-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-89w","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:00.20584769-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-8oh","content_hash":"a476e4b24ffb962c7f65cf8ee6a30463143a7cfce2c742db789e3cffa82cccfc","title":"Remove domain-specific code from helpers.ts","description":"","notes":"Analysis complete. Domain-specific functions in helpers.ts: getLocation, getFactionMembers, getFactionLeader, getCoreFactionMembers, getFactionRelationship. These are ALSO called from framework code (templateGraphView.ts, metaEntityFormation.ts) creating tight coupling. Proper fix requires: 1) Define domain interface for entity relationships, 2) Move helpers to domain layer, 3) Framework calls domain via interface. This is part of larger framework/domain separation (a3l).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T11:12:49.595661607-07:00","updated_at":"2025-11-28T04:27:17.181132982-07:00","closed_at":"2025-11-28T04:27:17.181140592-07:00","source_repo":"."}
{"id":"penguin-tales-8vi","content_hash":"3bdee984b8cc4abdae7f57bd01d8c15d08c7c9ef74de10ad8fee96403b4c8f08","title":"Lint project with eslint complexity rules","description":"## Lint Results Summary\n\n**Total issues: 216** (excluding tests)\n\n### By Type:\n- `no-explicit-any`: 66 (type safety)\n- `no-unused-vars`: 49 (dead code)\n- `complexity`: 44 (cyclomatic complexity \u003e 15)\n- `max-lines`: 18 (file/function too long)\n- `cognitive-complexity`: 18 (Sonar metric \u003e 15)\n- `max-params`: 14 (\u003e 4 params)\n\n### Worst Files:\n1. **worldEngine.ts** - 26 errors, 4 warnings (2400+ lines, God object)\n2. **metaEntityFormation.ts** - 20 errors\n3. **enrichmentService.ts** - 12 errors\n4. **contractEnforcer.ts** - 10 errors\n5. **helpers.ts** - 9 errors, 4 warnings\n\n### Key Actions:\n- worldEngine.ts needs major decomposition\n- Many `any` types need proper typing\n- Dead code cleanup (49 unused vars)\n- Complex methods need extraction (checkContractEnabledBy, validateCoverage, runGrowthPhase)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T03:55:34.369968847-07:00","updated_at":"2025-11-28T04:01:42.791868241-07:00","closed_at":"2025-11-28T04:01:42.791868241-07:00","source_repo":"."}
{"id":"penguin-tales-94c","content_hash":"b5f891f3f105e5bdfe5080668c0e3aefe07682483baca3621ce223408820ca6d","title":"Add unit tests to world-gen-naming","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:40:53.557142796-07:00","updated_at":"2025-11-28T05:10:59.837531811-07:00","closed_at":"2025-11-28T05:10:59.837531811-07:00","source_repo":"."}
{"id":"penguin-tales-9d9","content_hash":"d7baec1b74b9ecf03df7a3e5e7fa13ce05fab9bf5c6778805c9f1d3c862feb62","title":"Attraction/Repulsion placement","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-26T20:44:01.435554465-07:00","updated_at":"2025-11-26T20:51:33.442953884-07:00","closed_at":"2025-11-26T20:51:33.442953884-07:00","source_repo":"."}
{"id":"penguin-tales-a3l","content_hash":"527ac4486e78034487c2ad675319460bb78655d1ce60611aaa662cb2f7b0960e","title":"Framework/Domain Separation: Remove penguin-specific hardcoding from lore-weave framework","description":"Extract domain-specific elements from framework code","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-26T10:09:23.560430058-07:00","updated_at":"2025-11-28T14:32:10.990850191-07:00","closed_at":"2025-11-28T14:32:10.990850191-07:00","source_repo":"."}
{"id":"penguin-tales-a3l.1","content_hash":"16d1b71a39a5dc6e47dbe722a7f6eaebda3096e95c6e36587522ede7e6651331","title":"Move tagRegistry to domain","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T05:26:26.997846039-07:00","updated_at":"2025-11-28T05:34:16.534566208-07:00","closed_at":"2025-11-28T05:34:16.534566208-07:00","source_repo":"."}
{"id":"penguin-tales-a3l.2","content_hash":"0028a36a48b53af8c485c023e7846288835dcbeeca7d65c1151564b6dff35802","title":"Move loreValidator hardcoded terms to DomainLoreProvider","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T05:37:39.75295676-07:00","updated_at":"2025-11-28T05:39:19.006649321-07:00","closed_at":"2025-11-28T05:39:19.006649321-07:00","source_repo":"."}
{"id":"penguin-tales-a3l.3","content_hash":"15677c68266857be42890ff67745907d98a89c24703feb886724ad0899233da0","title":"Move imageGenerationService prompts to domain config","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T05:40:16.677877692-07:00","updated_at":"2025-11-28T14:32:10.881690886-07:00","closed_at":"2025-11-28T14:32:10.881690886-07:00","source_repo":"."}
{"id":"penguin-tales-akf","content_hash":"0f920a0a9e91c105974facceef9e278c9fcaa640420c695c8a175a0efae47b52","title":"The Canonry: Unified World-Building Suite","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:22.074859168-07:00","updated_at":"2025-11-29T07:10:18.697795571-07:00","closed_at":"2025-11-29T07:10:18.697795571-07:00","source_repo":"."}
{"id":"penguin-tales-akf.1","content_hash":"c5a4a2875e34e515f016937ae25d8cc48f794a65aac547d1d74e321784e8564f","title":"Create packages/world-schema with unified types","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:27.084102577-07:00","updated_at":"2025-11-29T07:10:02.195093903-07:00","closed_at":"2025-11-29T07:10:02.195093903-07:00","source_repo":"."}
{"id":"penguin-tales-akf.2","content_hash":"e29fc4cd1a20a69fc7a7b38a1c323a2d3c918ca5f92a3903d951102ac89b83cf","title":"Create apps/canonry shell with module federation host","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:31.692841847-07:00","updated_at":"2025-11-29T07:10:03.899840536-07:00","closed_at":"2025-11-29T07:10:03.899840536-07:00","source_repo":"."}
{"id":"penguin-tales-akf.3","content_hash":"9ffe91c44e8ed27d4e020ffb136b969439984acbe2da5d057529f1dfc3f1de82","title":"Implement Schema Editor in Canonry","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:36.435973379-07:00","updated_at":"2025-11-29T07:10:05.664007491-07:00","closed_at":"2025-11-29T07:10:05.664007491-07:00","source_repo":"."}
{"id":"penguin-tales-akf.4","content_hash":"f9831681101d3d191d8f08c73e0b2870b7595ada57c83726519eec32a7194bfd","title":"Convert name-forge webui to module federation remote","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:41.22138816-07:00","updated_at":"2025-11-29T07:10:07.399507304-07:00","closed_at":"2025-11-29T07:10:07.399507304-07:00","source_repo":"."}
{"id":"penguin-tales-akf.5","content_hash":"890dcd9f2f19b8f955006e4339c5f42b2401fc903ce929dd0615835e0566eaef","title":"Convert cosmographer webui to module federation remote","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:46.486785844-07:00","updated_at":"2025-11-29T07:10:09.196227833-07:00","closed_at":"2025-11-29T07:10:09.196227833-07:00","source_repo":"."}
{"id":"penguin-tales-akf.6","content_hash":"3f6b50224cd166d069b9e1c1e623a23eaba785a13c31b12413f5276891aa27bd","title":"Migrate existing project files to WorldSeedProject schema","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T06:50:51.451295601-07:00","updated_at":"2025-11-29T07:10:11.024743614-07:00","closed_at":"2025-11-29T07:10:11.024743614-07:00","source_repo":"."}
{"id":"penguin-tales-apl","content_hash":"2c0f23af0b90f93614e22521be428d81b3dadadf7b7204cdddcd6b7965b0971f","title":"Remove createGovernanceFaction from framework metaEntityFormation.ts","description":"Analysis from ti1: Framework metaEntityFormation.ts has createGovernanceFaction() creating domain-specific 'faction:political' entities. Domain already has legalCodeFormation.ts with same functionality. Remove framework version, rely on domain implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T04:31:39.854384645-07:00","updated_at":"2025-11-28T04:46:26.316600297-07:00","closed_at":"2025-11-28T04:46:26.316600297-07:00","source_repo":"."}
{"id":"penguin-tales-avx","content_hash":"020c3358a36d6ebc4420837096fba68054f9b2e88c2674c7109d5e4c86d6bf70","title":"Split files over 1000 lines into components","description":"Files exceeding 1000 lines should be split into logical components for maintainability. Check all .ts files in the codebase and refactor oversized files.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T18:00:49.803311801-07:00","updated_at":"2025-11-28T18:00:49.803311801-07:00","source_repo":"."}
{"id":"penguin-tales-brq","content_hash":"c6c01dd0003c5a178a5fcc14235b3fddf8090d177d752920065d020ca6eb745c","title":"Create domain interface for entity relationship helpers","description":"Analysis from 8oh: helpers.ts has getLocation, getFactionMembers, getFactionLeader, getCoreFactionMembers, getFactionRelationship called from BOTH domain AND framework code (templateGraphView.ts, metaEntityFormation.ts). Fix: 1) Define domain interface for these operations, 2) Move implementations to domain, 3) Framework calls via interface.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T04:31:40.425189818-07:00","updated_at":"2025-11-28T04:44:13.998370422-07:00","closed_at":"2025-11-28T04:44:13.998370422-07:00","source_repo":"."}
{"id":"penguin-tales-bsb","content_hash":"476fc670253f2d4dfdc57e32d6e2492901a7ba16e53ca3853af6e4b71c056bf7","title":"Establish framework API discipline - remove backwards compatibility shims","description":"PROBLEM:\nThe codebase has accumulated backwards-compatibility shims and escape hatches that allow domain code to bypass framework protections. This creates divergent code paths that 'appear to work' but violate architectural intent.\n\nEXAMPLES:\n1. deriveCoordinates() - Legacy placement ignoring culture context\n2. graphView.getGraph() - Bypasses TemplateGraphView protections\n3. addEntityInRegion() - Legacy region API without culture\n4. Fallback to center coordinates when config missing\n\nPRINCIPLES FOR GOING FORWARD:\n1. NO FALLBACKS - Missing config should throw, not silently use defaults\n2. NO BYPASS METHODS - Don't expose internal objects (getGraph, getMapper, etc.)\n3. BREAK DOMAIN ON FRAMEWORK CHANGES - Domain should fail to compile/run when framework changes\n4. SINGLE PATH - One way to do things, not legacy + new in parallel\n5. DELETE DEPRECATED CODE - Don't leave old APIs 'for compatibility'\n\nIMPLEMENTATION:\n1. Remove escape hatches (getGraph, deriveCoordinates without culture, etc.)\n2. Make missing config throw errors immediately\n3. Update domain code when framework APIs change\n4. Add compile-time or runtime checks to enforce correct usage\n5. Document the ONE correct way in code comments/types","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-28T17:31:15.603143611-07:00","updated_at":"2025-11-28T17:31:15.603143611-07:00","source_repo":"."}
{"id":"penguin-tales-cbn","content_hash":"6ca956ac568f737fa14d60cd5b532f6c94f0ec33c71a6f9a32139e064840c43f","title":"Integrate name-forge into lore-weave framework","description":"","notes":"Phase 1: Framework Changes - Create nameForgeService.ts, update addEntity(), remove old name generation. Phase 2: Domain Changes - Create config JSON, update main.ts and templates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T12:29:59.975305053-07:00","updated_at":"2025-11-26T12:40:25.911829326-07:00","closed_at":"2025-11-26T12:40:25.911829326-07:00","source_repo":"."}
{"id":"penguin-tales-d97","content_hash":"c8dcbc5410f8ef38e737c0051eff9aa862e65d83c2a1233a666c3b0d9ccfd083","title":"Build validation CLI and reporters","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:01.220321146-07:00","updated_at":"2025-11-24T08:35:08.709297836-07:00","closed_at":"2025-11-24T08:35:08.709297836-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-d97","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:01.221548948-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-dgt","content_hash":"83ff3b2ea83aa2edfb0cc28c82009e68f6c853b62a10fb6299d2a3a3af73c2f9","title":"Implement separation metrics with classifier","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:01.028419072-07:00","updated_at":"2025-11-24T08:32:52.398269076-07:00","closed_at":"2025-11-24T08:32:52.398269076-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-dgt","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:01.029028302-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-dla","content_hash":"63218de49b5bd7d4af5390a82234c9cd8019a62e41236aa96df0b2d3a0057387","title":"Define Zod schemas for domain configs (PhonologyProfile, MorphologyProfile, StyleRules)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:39.936097595-07:00","updated_at":"2025-11-24T07:58:55.042102565-07:00","closed_at":"2025-11-24T07:58:55.042102565-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-dla","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:39.93674594-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-ds5","content_hash":"329ceb73b45b1bc5de423cb116b420b1a4f78716b9a590d44133beaacec4c9cf","title":"Organize lore-weave lib structure","description":"lib/config/tagRegistry.ts and feedbackLoops.ts contain both framework utilities (getTagMetadata, validateEntityTags, FeedbackAnalyzer) and domain-specific data (penguin tags like orca/colony/fishing, hero/conflict feedback loops). Needs split: framework keeps interfaces and utility functions, domain provides data via DomainSchema config. This is part of a3l epic.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-27T11:34:48.556454833-07:00","updated_at":"2025-11-28T05:08:13.580560752-07:00","closed_at":"2025-11-28T05:08:13.580560752-07:00","source_repo":"."}
{"id":"penguin-tales-dup","content_hash":"0d8e635e1948bce19064b99e6e31168db2db2a75698d207bd5d29538869b71d3","title":"Complete tags array to KVP migration in domain templates and systems","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T13:01:33.840117739-07:00","updated_at":"2025-11-27T13:10:22.641201746-07:00","closed_at":"2025-11-27T13:10:22.641201746-07:00","source_repo":"."}
{"id":"penguin-tales-dwr","content_hash":"06052acbf628f02eeb2c4dfd56ecf7a354919fdad768eeefc2b431d27176d52d","title":"Parameterize 'anomaly' subtype in emergentDiscovery.ts","description":"Analysis from 7si: emergentDiscovery.ts hardcodes 'anomaly' subtype (lines 192, 309). Add 'anomalySubtype' config field and read via requireConfigValue() like other config values.","notes":"emergentDiscovery.ts contains domain-specific concepts (magic, anomalies, resource types). Moving entire file to penguin-tales domain.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T04:31:40.075791123-07:00","updated_at":"2025-11-28T04:38:11.78927027-07:00","closed_at":"2025-11-28T04:38:11.78927027-07:00","source_repo":"."}
{"id":"penguin-tales-e60","content_hash":"393c8e551d2350842550bed826fed3e225cf1572fecd9693d7a247b59c07b42b","title":"Implement Generalized Coordinate System","description":"Implement unified 6-axis coordinate template (plane, sector_x, sector_y, cell_x, cell_y, z_band) for all entity types.\n\nKey Design:\n- Required coordinates field on HardState (not optional)\n- Eager assignment - templates must assign at creation\n- Physical space first - locations/NPCs\n- Cross-kind distance in shared spaces\n\nReference: COORDINATES.md, plan at ~/.claude/plans/mellow-dancing-feather.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T19:29:55.361938399-07:00","updated_at":"2025-11-26T19:46:06.080583785-07:00","closed_at":"2025-11-26T19:46:06.080583785-07:00","source_repo":"."}
{"id":"penguin-tales-ee0","content_hash":"ec1edfe63f323ab9d2c5ce0ef3fa06b5afc178027f438a87ff9ecd4a4b876076","title":"Add coordinate system diagnostics","description":"Add statistics collection and debug logging to expose coordinate system usage:\n- Track how many entities use each placement path (deriveCoordinates, legacy region APIs, culture-aware APIs)\n- Log when fallback to center coordinates occurs\n- Count regions per entity kind (not just location)\n- Track culture clustering in semantic space\n- Warn on misconfiguration (missing culture context, etc.)\n- Output summary statistics at end of generation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T16:55:35.025149942-07:00","updated_at":"2025-11-28T17:01:13.73500925-07:00","closed_at":"2025-11-28T17:01:13.73500925-07:00","source_repo":"."}
{"id":"penguin-tales-emm","content_hash":"28cc2e41796ea52e065a2291dcebeddb3f6a4fed0d60e237018b9020401e27f5","title":"Penguin domain default placements","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T20:44:03.129268603-07:00","updated_at":"2025-11-26T20:51:28.621560367-07:00","closed_at":"2025-11-26T20:51:28.621560367-07:00","source_repo":"."}
{"id":"penguin-tales-ez9","content_hash":"073f7442867f87aace6430f28d3922f39c09d8978b6cb4b35c691578039d9c35","title":"Extract relationship config from helpers.ts to domain schema","description":"helpers.ts has 400+ lines of hardcoded relationship mappings (strengths, categories, conflicts, thresholds). Move to DomainSchema.","notes":"Extended DomainSchema with RelationshipConfig, RelationshipLimits, RelationshipCategory types. Updated penguin schema with strength, category, isLineage, distanceRange, conflictsWith. Updated helpers.ts to use domain schema methods with fallback.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.752856186-07:00","updated_at":"2025-11-26T10:21:54.128472935-07:00","closed_at":"2025-11-26T10:21:54.128477016-07:00","source_repo":"."}
{"id":"penguin-tales-f3d","content_hash":"d35fbeee08ac8e413c3758445f5019efa43037cb2ad9351015036a76a3f196b4","title":"Implement feature extraction for names","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:00.835307864-07:00","updated_at":"2025-11-24T08:31:30.826034897-07:00","closed_at":"2025-11-24T08:31:30.826034897-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-f3d","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:00.836051266-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-f3e","content_hash":"58d06c9d6b5222a99de2f8464251835f2f7c62cc6fc42dcc5b38a4e5cceeb733","title":"Replace custom algorithms with library implementations","description":"Based on research in penguin-tales-3qn, replace custom implementations with battle-tested libraries:\n\n1. **turf.js** - Replace geometry functions in regionMapper.ts\n2. **simple-statistics** - Replace stats in distributionCalculations.ts, statisticsCollector.ts  \n3. **Fix shuffle bug** - helpers.ts uses broken sort-based shuffle\n\nStart with the shuffle bug fix (easiest, highest impact on correctness).","notes":"Completed: 1) Fixed biased shuffle with Fisher-Yates, 2) Replaced variance/stdDev in statisticsCollector.ts with simple-statistics, 3) turf.js not applicable (3D coords vs 2D geo)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T04:05:50.058225581-07:00","updated_at":"2025-11-28T04:09:26.696716133-07:00","closed_at":"2025-11-28T04:09:26.696721728-07:00","source_repo":"."}
{"id":"penguin-tales-fxx","content_hash":"24b0be970ee7966433228b1d47bd6eaad3011d6acc459ca89a37a2231b8dc841","title":"Create example domain configs and test generation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:41.891995966-07:00","updated_at":"2025-11-24T08:09:44.786898092-07:00","closed_at":"2025-11-24T08:09:44.786898092-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-fxx","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:41.89270697-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-gzf","content_hash":"f79a9899e5dd1656c2b082b6c80ca373d02abca2e382ec363da8c28c03232ab2","title":"Test validation system on example domains","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:01.42053294-07:00","updated_at":"2025-11-24T08:35:09.006310325-07:00","closed_at":"2025-11-24T08:35:09.006310325-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-gzf","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:01.42106188-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-izu","content_hash":"5a9face87697d43ae65e78a788cca130e3f121bca92b8ad61ab382a9e6c37c10","title":"Move occurrence relationship kinds to domain config","description":"Analysis from rgj: occurrenceCreation.ts hardcodes 'participant_in', 'epicenter_of', 'triggered_by' relationship kinds. Options: 1) Add to FRAMEWORK_RELATIONSHIP_KINDS if universal, 2) Move to domain config via graph.config.domain, 3) Move entire occurrenceCreation system to domain layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T04:31:40.756121097-07:00","updated_at":"2025-11-28T04:41:18.200314594-07:00","closed_at":"2025-11-28T04:41:18.200314594-07:00","source_repo":"."}
{"id":"penguin-tales-j2f","content_hash":"e3372a07ceb3dcffca072ae1dffea86beabf00a7f8e61c6aa342b74bde77a0fc","title":"Implement capacity metrics (collision rate, entropy)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T08:27:00.38943183-07:00","updated_at":"2025-11-24T08:30:06.54090564-07:00","closed_at":"2025-11-24T08:30:06.54090564-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-j2f","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T08:27:00.390078361-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-jbj","content_hash":"ac3134860f56eb654f310f68ca77dae3f9f86bf32dc785cb9bdb0a954e30d375","title":"Setup world-gen-naming package structure and dependencies","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:39.788533653-07:00","updated_at":"2025-11-24T07:57:28.418387576-07:00","closed_at":"2025-11-24T07:57:28.418387576-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-jbj","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:39.794868156-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-kdm","content_hash":"5cde6ef2f44f70be493ca0aee4fbfc84cf6bc78f17c590e57a852c7b0cddd4ad","title":"Halton Sequence placement","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T20:44:00.634504309-07:00","updated_at":"2025-11-26T20:51:28.639967852-07:00","closed_at":"2025-11-26T20:51:28.639967852-07:00","source_repo":"."}
{"id":"penguin-tales-kml","content_hash":"205ad7bd3ca128a2ac3edc5e41fa211edd2c72a99e6b0181c46b60743c4825fd","title":"Name uniqueness enforcement - 46 duplicate names in generated world","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:59:18.367067766-07:00","updated_at":"2025-11-28T10:25:08.533045424-07:00","closed_at":"2025-11-28T10:25:08.533045424-07:00","source_repo":"."}
{"id":"penguin-tales-kr7","content_hash":"f4240ac8b731a50e6b87f149201effe72de5e11ef27f16e55ebad898f56e7025","title":"Framework/Domain Separation: Define framework-level primitives","description":"Define the minimal set of primitives that the framework needs to operate:\n\n**Framework Entity Kinds:**\n- era - Required for era transition system\n\n**Framework Relationship Kinds:**\n- part_of - Hierarchical composition (meta-entities, structural)\n- supersedes - Temporal succession (era transitions)\n- active_during - Entity-era temporal binding\n\n**Framework Status Values:**\n- historical - Archived entity/relationship\n- active - Generic active state\n\n**Implementation:**\n1. Create apps/lore-weave/lib/types/frameworkPrimitives.ts\n2. Define constants and type guards\n3. Update framework code to use these constants instead of string literals\n4. Document which primitives are framework vs domain","notes":"Completed: Converted framework code to use FRAMEWORK_ENTITY_KINDS, FRAMEWORK_STATUS, FRAMEWORK_RELATIONSHIP_KINDS constants. Updated 8 files: eraTransition.ts, eraSpawner.ts, occurrenceCreation.ts, universalCatalyst.ts, catalystHelpers.ts, worldEngine.ts, enrichmentService.ts, frameworkPrimitives.ts. Added documentation to CLAUDE.md about framework primitives. Note: Test failures pre-exist (mock graph missing methods).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T09:44:23.055536711-07:00","updated_at":"2025-11-28T04:26:36.349582817-07:00","closed_at":"2025-11-28T04:26:36.349588308-07:00","source_repo":"."}
{"id":"penguin-tales-kr7.1","content_hash":"a6a5c08fe258ac6db16f266c594e58aba7b4f09ef32a41cc0d7006a1075f7c35","title":"Create frameworkPrimitives.ts with constants and type guards","description":"Create apps/lore-weave/lib/types/frameworkPrimitives.ts containing:\n\n- FRAMEWORK_ENTITY_KINDS = { ERA: 'era' }\n- FRAMEWORK_RELATIONSHIP_KINDS = { PART_OF: 'part_of', SUPERSEDES: 'supersedes', ACTIVE_DURING: 'active_during' }\n- FRAMEWORK_STATUS = { HISTORICAL: 'historical', ACTIVE: 'active' }\n- Type guards: isFrameworkRelationship(), isFrameworkStatus()\n- Export from index.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:44:49.809723707-07:00","updated_at":"2025-11-26T09:48:41.399444717-07:00","closed_at":"2025-11-26T09:48:41.399448603-07:00","source_repo":"."}
{"id":"penguin-tales-kzq","content_hash":"4567fb558c398b9b098456fe6c3556b8d58b17613624ff163147a320b0a607ff","title":"Validate name-forge integration - entities not showing penguin names","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T05:52:41.899003119-07:00","updated_at":"2025-11-28T09:59:04.466239266-07:00","closed_at":"2025-11-28T09:59:04.466239266-07:00","source_repo":"."}
{"id":"penguin-tales-llw","content_hash":"f2dc97e658e3457ac0a4d1af77972d880741e951e3196329683490647aa1db3c","title":"Implment world-gen-naming/01_FRAMEWORK.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-24T07:37:18.614495044-07:00","updated_at":"2025-11-28T10:00:06.05315682-07:00","closed_at":"2025-11-28T10:00:06.05315682-07:00","source_repo":"."}
{"id":"penguin-tales-m5z","content_hash":"9122be3f9fc3cc6857e5a9e146c15430ee23a414a5ff45ed394a8b9d8b9a0f8e","title":"Rationalize test suite","description":"","notes":"Progress: Fixed null check in templateGraphView.ts constructor.\nTests improved from 363 failing to 291 failing (945 passing).\n\nRemaining issues:\n- Test mocks use old Graph interface (direct property access vs getEntity/getRelationships methods)\n- Need proper mock factory that matches current Graph API\n- 18 test files still failing\n\nSuggested fix: Create createMockGraph() helper that returns Graph with proper methods","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T11:35:08.395259267-07:00","updated_at":"2025-11-28T09:54:34.804178959-07:00","closed_at":"2025-11-28T09:54:34.804178959-07:00","source_repo":"."}
{"id":"penguin-tales-mm5","content_hash":"a1984c41ccc03d803d49adcb93b962bae8b8d0c14e0f3326eb60cb6bcb1e08f9","title":"Implement phonology generator (syllable templates, phoneme selection)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.077497256-07:00","updated_at":"2025-11-24T08:00:18.165056066-07:00","closed_at":"2025-11-24T08:00:18.165056066-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-mm5","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.078249127-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-otn","content_hash":"817214ea2181f887a32e23e2c50f5c309250d2d3f86eded626261ea65d7712bf","title":"Poisson Disk Sampling algorithm","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T20:43:55.347473754-07:00","updated_at":"2025-11-26T20:50:07.296512747-07:00","closed_at":"2025-11-26T20:50:07.296512747-07:00","source_repo":"."}
{"id":"penguin-tales-pnj","content_hash":"f18149d51d19917b24b53063ef8406985128235ec3bc16721620d5788f58b98e","title":"Culture-First Framework Enhancement","description":"Make culture a first-class mechanic, not just a data field. Culture should drive decisions in templates, systems, and pressures - not just naming and visuals.\n\n**Current State:**\n- Culture is stored on entities but ignored by most mechanics\n- Cross-culture relationships form identically to same-culture\n- Templates copy culture but don't branch on it\n- Pressures measure fragmentation, not actual cultural state\n\n**Goal:**\n- Templates branch on culture to create culture-specific variants\n- Systems prefer same-culture relationships and penalize cross-culture\n- Pressures measure actual cultural alignment/divergence\n- Framework provides tools to detect culture-ignorant domain code","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-28T14:58:47.605583178-07:00","updated_at":"2025-11-28T15:15:18.488675188-07:00","closed_at":"2025-11-28T15:15:18.488675188-07:00","source_repo":"."}
{"id":"penguin-tales-pnj.1","content_hash":"0cdd561c7899e4560d1836e2bb4ab173d2eb10c43b567730a76c6673e296aedf","title":"Add culture-aware selection to TargetSelector","description":"Extend SelectionBias interface to support culture preferences.\n\n**Changes to apps/lore-weave/lib/selection/targetSelector.ts:**\n\n```typescript\ninterface SelectionBias {\n  // Existing fields...\n  \n  // NEW: Culture-aware selection\n  sameCultureAs?: string;           // Prefer entities matching this culture\n  differentCulturePenalty?: number; // Multiplier for cross-culture (default 1.0, use 0.5 to halve chance)\n  requireCulture?: string;          // Hard filter - only entities with this culture\n  excludeCultures?: string[];       // Hard filter - exclude these cultures\n}\n```\n\n**Implementation:**\n1. In scoring logic, apply sameCultureAs boost (e.g., 2.0x for match)\n2. Apply differentCulturePenalty for non-matches\n3. Apply hard filters in initial candidate filtering\n\n**Usage in templates:**\n```typescript\nconst cultists = graphView.selectTargets('npc', count, {\n  sameCultureAs: location.culture,\n  differentCulturePenalty: 0.3  // Cross-culture recruitment is rare\n});\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T14:58:58.885448562-07:00","updated_at":"2025-11-28T15:04:11.47485603-07:00","closed_at":"2025-11-28T15:04:11.47485603-07:00","source_repo":"."}
{"id":"penguin-tales-pnj.2","content_hash":"b600324b72c0f6725cf416cc70af19bffdef1a21733a162d566a6cbb0ed7a94e","title":"Add CulturalAwarenessAnalyzer to framework","description":"Create a framework-level debug/reporting mechanism that detects when domain code is not being culturally aware.\n\n**New file: apps/lore-weave/lib/services/culturalAwarenessAnalyzer.ts**\n\n**Tracks and reports:**\n1. **Cross-culture relationships formed** - Log when relationships form between entities of different cultures\n2. **Culture-blind entity creation** - Detect when templates create entities without considering parent culture\n3. **Selection operations without culture bias** - Track selectTargets() calls that don't use culture parameters\n4. **Cultural homogeneity metrics** - Per-location and per-faction cultural diversity scores\n\n**Interface:**\n```typescript\ninterface CulturalAwarenessReport {\n  // Relationship analysis\n  crossCultureRelationships: number;\n  sameCultureRelationships: number;\n  crossCultureRatio: number;\n  \n  // Entity creation analysis\n  entitiesMatchingParentCulture: number;\n  entitiesMismatchingParentCulture: number;\n  orphanedCultureEntities: number;  // No clear cultural parent\n  \n  // Selection analysis\n  selectionsWithCultureBias: number;\n  selectionsWithoutCultureBias: number;\n  \n  // Homogeneity metrics\n  locationCulturalDiversity: Map\u003cstring, number\u003e;  // location -\u003e diversity score\n  factionCulturalDiversity: Map\u003cstring, number\u003e;   // faction -\u003e diversity score\n  \n  // Warnings\n  warnings: string[];\n}\n```\n\n**Integration points:**\n1. Hook into TemplateGraphView.createEntity() to track culture decisions\n2. Hook into relationship creation to track cross-culture links\n3. Hook into selectTargets() to track culture bias usage\n4. Call analyzer.report() at end of each epoch for summary\n\n**Output:** Add to existing statistics output or create cultural_awareness.log","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T14:59:10.62249352-07:00","updated_at":"2025-11-28T15:14:46.960787405-07:00","closed_at":"2025-11-28T15:14:46.960787405-07:00","source_repo":"."}
{"id":"penguin-tales-pnj.3","content_hash":"8a1fa1062a98f5645f62684d24a7dd2ea45c967284058745d8a451583802882f","title":"Update domain templates to be culturally aware","description":"Update all penguin domain templates to consider culture in their decisions.\n\n**DONE:**\n- cultFormation.ts - Added sameCultureAs preference, differentCulturePenalty (0.3) for cultist recruitment\n- guildEstablishment.ts - Added sameCultureAs preference, differentCulturePenalty (0.2) for guild membership\n\n**PATTERN ESTABLISHED:**\n```typescript\nconst result = graphView.selectTargets('npc', count, {\n  prefer: {\n    sameCultureAs: location.culture, // Prefer same-culture recruits\n    preferenceBoost: 2.0\n  },\n  avoid: {\n    differentCulturePenalty: 0.3 // Cross-culture is rare\n  }\n});\n```\n\n**REMAINING:**\n- heroEmergence.ts - Branch on culture for hero archetype\n- familyExpansion.ts - sameCultureAs for family members\n- kinshipConstellation.ts - Same-culture kinship networks\n- factionSplinter.ts - Preserve/diverge culture\n- colonyFounding.ts - Cultural expansion\n- anomalyManifestation.ts - Culture-specific attraction\n- techInnovation.ts - Aurora-stack favored\n- crisisLegislation.ts, greatFestival.ts, ideologyEmergence.ts - Cultural context","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T14:59:23.925130061-07:00","updated_at":"2025-11-28T15:15:10.997718789-07:00","closed_at":"2025-11-28T15:15:10.997718789-07:00","source_repo":"."}
{"id":"penguin-tales-pnj.4","content_hash":"6435098972f850aa56c04fdb3f4439eb679025183a8b77d523180cd7b5c24ce6","title":"Update domain systems to be culturally aware","description":"Update all penguin domain systems to consider culture in their mechanics.\n\n**DONE:**\n- relationshipFormation.ts - Added sameCultureMultiplier (1.5x), differentCulturePenalty (0.4x), crossCultureRomancePenalty (0.2x)\n  - Friendships/rivalries boosted for same-culture NPCs\n  - Conflicts more likely between different cultures\n  - Romance strongly culture-dependent\n\n**REMAINING:**\n- culturalDrift.ts - Use entity.culture field, not just tags\n- Meta-entity formation systems (magicSchoolFormation, combatTechniqueFormation, legalCodeFormation) - Prefer same-culture clustering\n- New system: culturalAssimilation.ts - Entities assimilate when surrounded by different culture","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T14:59:39.085045783-07:00","updated_at":"2025-11-28T15:15:11.014107085-07:00","closed_at":"2025-11-28T15:15:11.014107085-07:00","source_repo":"."}
{"id":"penguin-tales-pnj.5","content_hash":"7dd8d0fd10d2723ffb0173947807458e8fff8e384f854fc2d20273f91dedfbd0","title":"Update domain pressures to measure cultural state","description":"Update penguin domain pressures to measure actual cultural alignment/divergence.\n\n**File: penguin-tales/lore/config/pressures.ts**\n\n**Update cultural_tension pressure:**\nCurrent implementation measures faction fragmentation and colony isolation (political metrics).\nShould measure actual cultural state:\n\n```typescript\ncultural_tension: {\n  sources: ['cross_culture_relationships', 'cultural_mixing', 'faction_splinter'],\n  sinks: ['assimilation', 'cultural_homogeneity', 'time'],\n  growth: (graph) =\u003e {\n    // 1. Cross-culture relationship ratio\n    const allRelationships = graph.getRelationships();\n    const crossCultureRels = allRelationships.filter(r =\u003e {\n      const src = graph.getEntity(r.src);\n      const dst = graph.getEntity(r.dst);\n      return src \u0026\u0026 dst \u0026\u0026 src.culture !== dst.culture;\n    });\n    const crossCultureRatio = crossCultureRels.length / Math.max(1, allRelationships.length);\n    \n    // 2. Location cultural diversity\n    const locations = graph.getEntitiesByKind('location');\n    let totalDiversity = 0;\n    for (const loc of locations) {\n      const residents = graph.findRelationships({ kind: 'resident_of', dst: loc.id });\n      const cultures = new Set(residents.map(r =\u003e graph.getEntity(r.src)?.culture));\n      totalDiversity += cultures.size \u003e 1 ? (cultures.size - 1) * 0.5 : 0;\n    }\n    \n    // 3. Faction cultural diversity  \n    const factions = graph.getEntitiesByKind('faction');\n    let factionDiversity = 0;\n    for (const faction of factions) {\n      const members = graph.findRelationships({ kind: 'member_of', dst: faction.id });\n      const cultures = new Set(members.map(r =\u003e graph.getEntity(r.src)?.culture));\n      factionDiversity += cultures.size \u003e 1 ? (cultures.size - 1) * 0.3 : 0;\n    }\n    \n    return crossCultureRatio * 10 + totalDiversity + factionDiversity;\n  },\n  decay: (graph) =\u003e {\n    // Decay when cultures are homogeneous\n    const locations = graph.getEntitiesByKind('location');\n    let homogeneousCount = 0;\n    for (const loc of locations) {\n      const residents = graph.findRelationships({ kind: 'resident_of', dst: loc.id });\n      const cultures = new Set(residents.map(r =\u003e graph.getEntity(r.src)?.culture));\n      if (cultures.size \u003c= 1) homogeneousCount++;\n    }\n    return homogeneousCount * 0.5;\n  }\n}\n```\n\n**Add new pressure: cultural_harmony**\n```typescript\ncultural_harmony: {\n  description: 'Measures cultural unity and cooperation within cultures',\n  sources: ['same_culture_alliances', 'cultural_homogeneity', 'assimilation'],\n  sinks: ['cross_culture_conflict', 'cultural_divergence'],\n  growth: (graph) =\u003e {\n    // Reward same-culture faction alliances\n    const alliances = graph.findRelationships({ kind: 'allied_with' });\n    const sameCultureAlliances = alliances.filter(r =\u003e {\n      const src = graph.getEntity(r.src);\n      const dst = graph.getEntity(r.dst);\n      return src \u0026\u0026 dst \u0026\u0026 src.culture === dst.culture;\n    });\n    return sameCultureAlliances.length * 2;\n  }\n}\n```\n\n**Update era modifiers to reference cultural pressures:**\n- Expansion era: cultural_harmony grows faster (unified expansion)\n- Conflict era: cultural_tension grows faster (cultural friction)\n- Reconstruction era: assimilation increases (cultures merge after conflict)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T14:59:55.211399856-07:00","updated_at":"2025-11-28T15:15:11.022106663-07:00","closed_at":"2025-11-28T15:15:11.022106663-07:00","source_repo":"."}
{"id":"penguin-tales-rgj","content_hash":"e46a71039344663822332b5c1e2f1ba4da167881cf6d6dbbbaf986d502240ff0","title":"Extract occurrence relationship kinds to domain schema","description":"occurrenceCreation.ts references domain relationship kinds (participant_in, epicenter_of, triggered_by). Move to domain config.","notes":"Analysis: occurrenceCreation.ts hardcodes 'participant_in', 'epicenter_of', 'triggered_by' relationship kinds in contract and code. Options: 1) Add to FRAMEWORK_RELATIONSHIP_KINDS if universal to all domains, 2) Move to domain config and read via graph.config.domain, 3) Move entire occurrenceCreation system to domain layer. Part of larger a3l epic for framework/domain separation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.802241491-07:00","updated_at":"2025-11-28T04:27:39.069150323-07:00","closed_at":"2025-11-28T04:27:39.069156034-07:00","source_repo":"."}
{"id":"penguin-tales-rne","content_hash":"7962d8efb1844afd82f2bd0e3d3707956cd03340e3b15833e44021e7fe7009ee","title":"Implement morphology application (prefixes, suffixes, structures)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.226495127-07:00","updated_at":"2025-11-24T08:01:01.031244943-07:00","closed_at":"2025-11-24T08:01:01.031244943-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-rne","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.227233893-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-ti1","content_hash":"3180ad4e28215431fe5edb039a41e9124c97e55e0b6aab0402975fc1d9123a9a","title":"Remove remaining domain refs from metaEntityFormation.ts","description":"metaEntityFormation.ts references domain-specific subtypes and relationship kinds. Already deprecated but cleanup needed.","notes":"Found: metaEntityFormation.ts has createGovernanceFaction() creating 'faction:political' entities with hardcoded subtypes/relationships ('controls', 'weaponized_by'). Domain also has its own version in legalCodeFormation.ts. Fix: 1) Remove createGovernanceFaction from framework metaEntityFormation.ts, 2) Rely solely on domain's legalCodeFormation.ts. Controlled by config.transformation.createGovernanceFaction flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.792623878-07:00","updated_at":"2025-11-28T04:28:24.904014483-07:00","closed_at":"2025-11-28T04:28:24.904020134-07:00","source_repo":"."}
{"id":"penguin-tales-ulk","content_hash":"3e3ef594e034d503a60841bf7d7659c718dd48339e5ca7a33369867575e647b0","title":"Implement domain selector (kind/subKind/tags matching)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-24T07:48:40.570036991-07:00","updated_at":"2025-11-24T08:02:23.295546551-07:00","closed_at":"2025-11-24T08:02:23.295546551-07:00","source_repo":".","dependencies":[{"issue_id":"penguin-tales-ulk","depends_on_id":"penguin-tales-5u1","type":"discovered-from","created_at":"2025-11-24T07:48:40.570818564-07:00","created_by":"daemon"}]}
{"id":"penguin-tales-uxn","content_hash":"841dbd05cb46416374b663af8f889b7c18bf10a72d90f39a05bbb2fcbb734a2b","title":"Remove getGraph() bypass from templates and systems","description":"Templates/systems call graphView.getGraph() to bypass TemplateGraphView protections.\n\nSCOPE (20+ occurrences):\nFramework systems (apps/lore-weave/lib/systems/):\n- universalCatalyst.ts:113\n- eraTransition.ts:87\n- relationshipCulling.ts:68\n- eraSpawner.ts:88\n\nDomain systems (penguin-tales/lore/systems/):\n- beliefContagion.ts:160\n- magicSchoolFormation.ts:226\n- relationshipFormation.ts:202\n- relationshipReinforcement.ts:94\n- legendCrystallization.ts:94\n- successionVacuum.ts:129\n- thermalCascade.ts:167\n- culturalDrift.ts:81\n- legalCodeFormation.ts:313\n- allianceFormation.ts:66\n- combatTechniqueFormation.ts:227\n- prominenceEvolution.ts:116\n- conflictContagion.ts:82\n- relationshipDecay.ts:111\n- resourceFlow.ts:60\n- occurrenceCreation.ts:125\n\nPROBLEM:\nTemplateGraphView exists to enforce correct patterns but getGraph() bypasses all protections.\n\nREQUIRED CHANGES:\n1. For each getGraph() call, identify what Graph methods are being used\n2. Add missing methods to TemplateGraphView if needed\n3. Replace getGraph() calls with TemplateGraphView methods\n4. Remove or deprecate getGraph() with warning/error","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T17:30:51.362550873-07:00","updated_at":"2025-11-28T18:30:48.060621657-07:00","closed_at":"2025-11-28T18:30:48.060621657-07:00","source_repo":"."}
{"id":"penguin-tales-vm4","content_hash":"3df3da0bcd2d3a18090563fa284dea37d024a22293d4ace6d568415c356e8f33","title":"Placement Scheme Algorithms","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T20:39:26.778905748-07:00","updated_at":"2025-11-26T20:44:13.601411258-07:00","closed_at":"2025-11-26T20:44:13.601411258-07:00","source_repo":"."}
{"id":"penguin-tales-x2d","content_hash":"53c5c9499c412da213fa76f19450b7d558a1905471091c1ba5333937a75a3d79","title":"Extract action domain logic from catalystHelpers.ts","description":"catalystHelpers.ts contains subtype-to-action-domain mappings and occurrence types. Move to domain config.","notes":"Already done! Action domain logic properly delegated to domain: 1) Framework defines interface in domainSchema.ts (getActionDomains, getActionDomainsForEntity), 2) Domain implements in penguin-tales/lore/config/actionDomains.ts, 3) Framework reads via graph.config.domain.getActionDomainsForEntity(). No changes needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T10:09:32.773665671-07:00","updated_at":"2025-11-28T04:29:18.835993362-07:00","closed_at":"2025-11-28T04:29:18.835998014-07:00","source_repo":"."}
{"id":"penguin-tales-xpn","content_hash":"611ee7343e37b1eed98dde053b222e3060a4d840498f740698febd4e6a983925","title":"Style unification and URL state persistence for Canonry","description":"1. Add URL-based state persistence so reloading returns to same screen\n2. Create shared theme constants for consistent styling\n3. Brighten colors across all apps (Enumerist, Name Forge, Cosmographer)\n4. Unify fonts, paddings, margins across apps\n5. Each app gets slightly different accent color but same base theme","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T08:18:41.592001027-07:00","updated_at":"2025-11-29T08:18:41.592001027-07:00","source_repo":"."}
{"id":"penguin-tales-xx6","content_hash":"10063cc88f555c34f9c90e996658362f59bda63230a010aa1cf179690bf8d182","title":"Refactor meta-entity formation to SimulationSystem pattern","description":"Convert MetaEntityFormation service to a configurable SimulationSystem pattern:\n\n**Current Problems:**\n- MetaEntityConfig has domain logic (createGovernanceFaction)\n- Hardcoded clustering criteria types\n- Special service instead of reusing existing system abstraction\n\n**Solution:**\n1. Create framework clustering utilities (clusterEntities, transferRelationships, archiveEntity)\n2. Remove MetaEntityFormation service\n3. Domain defines meta-entity systems using SimulationSystem interface\n4. Move createGovernanceFaction to domain as post-formation hook or separate system\n\n**Tasks:**\n- Create apps/lore-weave/lib/utils/clusteringUtils.ts\n- Create apps/lore-weave/lib/utils/entityArchival.ts\n- Update penguin domain to use system pattern for magic schools, legal codes\n- Remove MetaEntityFormation service and MetaEntityConfig type","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-26T09:44:32.633169183-07:00","updated_at":"2025-11-28T14:28:22.679468259-07:00","closed_at":"2025-11-28T14:28:22.679468259-07:00","source_repo":"."}
{"id":"penguin-tales-xx6.1","content_hash":"b4903aa7cc1c62695bddd22dcc894c090df891669a725a27a0d2fd59efb213ce","title":"Create clusteringUtils.ts with generic clustering functions","description":"Create apps/lore-weave/lib/utils/clusteringUtils.ts:\n\n- clusterEntities(graph, config): Cluster[] - Generic greedy clustering\n- ClusterConfig interface with similarity callback\n- Cluster interface (entities, score)\n- Domain provides similarity function instead of hardcoded criteria types","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:05.883839811-07:00","updated_at":"2025-11-26T09:49:33.762196776-07:00","closed_at":"2025-11-26T09:49:33.762201237-07:00","source_repo":"."}
{"id":"penguin-tales-xx6.2","content_hash":"c272420b3c86559577afd3b0b854d58fbdb9a31006b57092376f7fc2dc565679","title":"Create entityArchival.ts with archival utilities","description":"Create apps/lore-weave/lib/utils/entityArchival.ts:\n\n- archiveEntity(graph, entityId): Mark entity as historical\n- archiveRelationship(graph, src, dst, kind): Mark relationship as historical  \n- transferRelationships(graph, fromIds, toId): Move relationships to new entity\n- preservePartOfLinks(graph, childIds, parentId): Create part_of relationships","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:05.995788761-07:00","updated_at":"2025-11-26T09:50:41.908891632-07:00","closed_at":"2025-11-26T09:50:41.908896111-07:00","source_repo":"."}
{"id":"penguin-tales-xx6.3","content_hash":"427fd03616d0af41c83f4c6c2387171900cac7d1f64ad26149ccdd0374c8b3ef","title":"Convert magic school formation to SimulationSystem","description":"In penguin-tales/lore/systems/:\n\nCreate magicSchoolFormation.ts as a SimulationSystem that:\n- Uses clusterEntities() from framework\n- Defines penguin-specific similarity function\n- Creates meta-entity using domain factory\n- Uses framework archival utilities\n\nRemove from metaEntityConfigs.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:06.122530234-07:00","updated_at":"2025-11-26T09:52:11.93500317-07:00","closed_at":"2025-11-26T09:52:11.935007638-07:00","source_repo":"."}
{"id":"penguin-tales-xx6.4","content_hash":"8a35c9e3997fb92f480ade02e020b1deddd9b948218a155c41f8ed211d59a3f9","title":"Convert legal code formation to SimulationSystem","description":"In penguin-tales/lore/systems/:\n\nCreate legalCodeFormation.ts as a SimulationSystem that:\n- Uses clusterEntities() from framework\n- Defines penguin-specific similarity function\n- Creates legal code entity\n- Creates governance faction (domain-specific side effect)\n- Uses framework archival utilities\n\nRemove from metaEntityConfigs.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:06.262746603-07:00","updated_at":"2025-11-26T09:54:40.19833342-07:00","closed_at":"2025-11-26T09:54:40.198337821-07:00","source_repo":"."}
{"id":"penguin-tales-xx6.5","content_hash":"b22889bba426775eb47982fb2380e50d6e314e12fb145bc20469720ca2b732db","title":"Remove MetaEntityFormation service and MetaEntityConfig","description":"After converting to system pattern:\n\n1. Remove apps/lore-weave/lib/services/metaEntityFormation.ts\n2. Remove MetaEntityConfig from apps/lore-weave/lib/types/engine.ts\n3. Remove metaEntityConfigs from EngineConfig\n4. Remove checkMetaEntityFormation() from worldEngine.ts\n5. Update index.ts exports\n6. Remove from penguin main.ts config","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T09:45:18.951884243-07:00","updated_at":"2025-11-26T09:57:27.613786662-07:00","closed_at":"2025-11-26T09:57:27.613791102-07:00","source_repo":"."}
{"id":"penguin-tales-zd6","content_hash":"2ef20626352f457a8775cb05fefa0cd97d0fc053e5e8b20d286819fd40a90c9f","title":"UI: Coordinate-aware visualization","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T11:34:56.037708223-07:00","updated_at":"2025-11-27T12:32:23.448630517-07:00","closed_at":"2025-11-27T12:32:23.448630517-07:00","source_repo":"."}
{"id":"penguin-tales-zv9","content_hash":"de680aa164373f17cbaf5d7380f21d7d412625ecdd885529299c6771f2a7eb6e","title":"Update templates to use culture-aware placement APIs","description":"Templates currently use legacy deriveCoordinates() which ignores culture context.\n\nPROBLEM (from diagnostics):\n- 100% of 210 placements have NO culture context\n- 98.6% use deriveCoordinates (legacy, no culture)\n- 0% use placeWithCulture (culture-aware API)\n\nREQUIRED CHANGES:\n1. Update all templates/systems that call deriveCoordinates() to use placeWithCulture()\n2. Pass culture context from entity creation through to placement\n3. Remove deriveCoordinates() or make it throw if culture context missing\n\nFiles to update:\n- penguin-tales/lore/systems/magicSchoolFormation.ts\n- penguin-tales/lore/systems/legalCodeFormation.ts  \n- penguin-tales/lore/systems/combatTechniqueFormation.ts\n- All other templates that create entities with coordinates\n\nAFTER: deriveCoordinates should be removed or error without culture","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T17:30:42.157344115-07:00","updated_at":"2025-11-28T19:18:13.838615852-07:00","closed_at":"2025-11-28T19:18:13.838615852-07:00","source_repo":"."}
